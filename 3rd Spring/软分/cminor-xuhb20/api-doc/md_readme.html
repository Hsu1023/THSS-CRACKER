<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMinor: 简介</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CMinor
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">简介 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>在大作业中，你需要实现一个 CMinor 的验证工具的核心算法。CMinor 是一个面向验证的教学语言，其包括源程序和验证标注两部分，其中源程序部分大致是 C 语言的子集，验证标注部分大致是 <a href="https://frama-c.com/html/acsl.html">ACSL (ANSI/ISO C Specification Language)</a> 的子集。从 C 语言的角度来看，验证标注是写在注释中的，不会影响 C 代码通常的编译和运行。</p>
<p>本次大作业你需要实现本工具中的核心验证算法部分，具体的说明请见<a class="el" href="md_task_doc.html">任务说明文档</a>。</p>
<p>本项目使用 <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">git submodules</a> 来集成公开测例仓库，在 clone 后请使用 <code>git submodule update --remote</code> 更新。</p>
<h1><a class="anchor" id="autotoc_md1"></a>
安装</h1>
<p>本项目依赖于 .NET 7，可以从<a href="https://dotnet.microsoft.com/download">这里</a>下载最新版。</p>
<blockquote class="doxtable">
<p>&zwj;注1：建议不要通过 <code>homebrew</code> 或 <code>apt</code> 直接安装，因为其软件源中的 dotnet 的版本很有可能是过时的。 </p>
</blockquote>
<blockquote class="doxtable">
<p>&zwj;注2：对于 M1/M2 芯片上的 macOS 系统，由于 Z3 目前还缺乏对 arm64 架构的完善支持。我们建议下载 x64 架构的 SDK，并将其安装目录（一般是 <code>/usr/local/share/dotnet/x64/</code>）加入环境变量 <code>PATH</code> 中以便于后续使用。 </p>
</blockquote>
<blockquote class="doxtable">
<p>&zwj;注3：如果你遇到了错误 &lsquo;Unhandled exception. System.DllNotFoundException: Unable to load shared library 'libz3&rsquo; or one of its dependencies.`，那么你需要从<a href="https://github.com/Z3Prover/z3/releases/tag/z3-4.12.0">这里</a>单独安装 Z3。 </p>
</blockquote>
<p>你可以使用任意你喜欢的 IDE，我们推荐：</p><ul>
<li><a href="https://visualstudio.microsoft.com/">Visual Studio 2022 (&gt;= 17.0.0)</a></li>
<li><a href="https://code.visualstudio.com/">Visual Studio Code</a>：配合 <a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csharp">C# 插件</a></li>
<li><a href="https://www.jetbrains.com/rider/">Rider</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
使用</h1>
<p>你可以通过在本项目的根目录下运行以下指令来编译并运行：</p>
<div class="fragment"><div class="line">dotnet run -- --source &lt;path&gt;</div>
</div><!-- fragment --><p>你可以使用 <code>--printCFA</code> 来打印出得到的 CFG。</p>
<p>所支持的各命令行选项的具体含义为：</p>
<div class="fragment"><div class="line">--source      Required. The source file of CMinor language (recommended with filename extension &#39;.c&#39;).</div>
<div class="line"> </div>
<div class="line">--printCFA    The file (or &#39;console&#39;) to which the control flow automata is printed.</div>
<div class="line"> </div>
<div class="line">--help        Display this help screen.</div>
<div class="line"> </div>
<div class="line">--version     Display version information.</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
结构</h1>
<p>该编译器的设计可以分为三个部分：</p>
<ul>
<li>前端（frontend）：使用由 <a href="https://www.antlr.org/">ANTLR</a> 自动生成的 parser 将源文件解析为 CST (concrete syntax tree，具体语法树)，再遍历 CST，生成 CFA（control flow automata，控制流自动机）；</li>
<li>中间表示（ir）：面向验证来设计的控制流自动机；</li>
<li>后端（backend）：使用 deductive verification 的方法从 CFA 中生成验证条件（verification condition），再将其喂给 SMT Solver 来求解。<ul>
<li>这部分是你需要来实现的。</li>
</ul>
</li>
</ul>
<p>你唯一被允许修改、并且你也必须要修改的文件是 <code>Verifier.cs</code>，你需要在其中实现演绎验证的算法主体。</p>
<h1><a class="anchor" id="autotoc_md4"></a>
API 文档</h1>
<p>API 文档在 <code>./api-doc/</code>，打开 <code>./api-doc/index.html</code> 即可浏览。</p>
<p>如果想要更新 API 文档的话，你需要使用 <a href="https://www.doxygen.nl/index.html">doxygen</a>，并在本项目根目录下运行 <code>doxygen</code>。</p>
<h1><a class="anchor" id="autotoc_md5"></a>
参考</h1>
<p>CMinor 语言大致是以下语言标准的子集：</p>
<ul>
<li>Standard C: <a href="https://web.archive.org/web/20181230041359if_/http://www.open-std.org/jtc1/sc22/wg14/www/abq/c17_updated_proposed_fdis.pdf">ISO/IEC 9899:2018, aka C17 or C18</a></li>
<li>ANSI/ISO C Speicication Language: <a href="https://frama-c.com/download/acsl-1.17.pdf">ACSL v1.17</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
